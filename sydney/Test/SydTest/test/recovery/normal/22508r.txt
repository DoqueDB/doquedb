Begin;
Initialize;
InitializeSession  "TESTDB" "root" "doqadmin";
Command "select * from system_privilege";
CreatePreparedCommand "select" "select * from system_privilege where userid = ?";
Command "select * from system_privilege where userid = 1";
PreparedCommand "select" [1];
ErasePreparedCommand "select";
Command "select privilege from system_privilege where userid = 1";
Command "revoke system_operations from user1";
Command "select * from system_privilege";
CreatePreparedCommand "select" "select * from system_privilege where userid = ?";
Command "select * from system_privilege where userid = 1";
PreparedCommand "select" [1];
ErasePreparedCommand "select";
Command "select privilege from system_privilege where userid = 1";
Command "revoke database_operations from user1";
Command "select * from system_privilege";
CreatePreparedCommand "select" "select * from system_privilege where userid = ?";
Command "select * from system_privilege where userid = 1";
PreparedCommand "select" [1];
ErasePreparedCommand "select";
Command "select privilege from system_privilege where userid = 1";
Command "revoke data_operations from user1";
Command "select * from system_privilege";
CreatePreparedCommand "select" "select * from system_privilege where userid = ?";
Command "select * from system_privilege where userid = 1";
PreparedCommand "select" [1];
ErasePreparedCommand "select";
Command "select privilege from system_privilege where userid = 1";
Command "revoke reference_operations from user1";
Command "select * from system_privilege";
CreatePreparedCommand "select" "select * from system_privilege where userid = ?";
Command "select * from system_privilege where userid = 1";
PreparedCommand "select" [1];
ErasePreparedCommand "select";
Command "select privilege from system_privilege where userid = 1";
TerminateSession;
InitializeSession  "TESTDB" "root" "doqadmin";
Command "insert system_privilege values (5,'newuser', (null), (null), (null))";
TerminateSession;
InitializeSession  "TESTDB" "root" "doqadmin";
DropUser "user1";
Command "drop database TESTDB";
TerminateSession;
Terminate;
System "rm -f \"c:\\Program Files\\Ricoh\\TRMeister\\test.pswd\"";
End;
