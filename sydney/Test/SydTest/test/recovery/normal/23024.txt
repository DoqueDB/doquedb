


Begin;
Initialize;
InitializeSession "";
Command "create database TESTDB";
TerminateSession;

InitializeSession "TESTDB";

######################################################################
#14の検査
#表を作る
#
#create table T(f int, g int generated by default as identity, h int);

Command "create table T(f int, g int generated by default as identity, h int)";

#g の値を指定せずに数件の挿入を数回繰り返す
#
#insert T(f, h) values (1, 10), (2, 20), (3, 30);
#insert T(f, h) values (4, 40), (5, 50), (6, 60);

Command "insert T(f, h) values (1, 10), (2, 20), (3, 30)";
Command "insert T(f, h) values (4, 40), (5, 50), (6, 60)";

#データベースをstart backupする
#
#start transaction read only, using snapshot;
#start backup;

Command "start transaction read only, using snapshot";
Command "start backup";

#データベースファイルを別の場所にコピーする
#
#System "xcopy /s /q /e /k /x /i \"c:\\Sydney\\data\\TESTDB\" \"c\:\\Sydney\\data\\TESTDB2\"";
#System "xcopy /s /q /e /k /x /i \"c:\\Sydney\\system\\TESTDB\" \"c:\\Sydney\\system\\TESTDB2\"";

System "cp -Rf d:\\dm\\data\\TESTDB d:\\dm\\data\\TESTDB2";
System "cp -Rf \"d:\\dm\\system\\TESTDB\" \"d:\\dm\\system\\TESTDB2\"";

#end backupする
#
#end backup;
#commit;

Command "end backup";
Command "commit";

#スクリプトをいったん終了し、別のスクリプトで mount する

Command "select * from T";
TerminateSession;
End;
